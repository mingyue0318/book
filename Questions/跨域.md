<!-- https://mp.weixin.qq.com/s/FFRbcLnf3ZVaU7TGWKSGBg -->
### 什么是跨域

```
    绕过浏览器的同源策略访问资源

    ### 同源策略

        是指在Web浏览器中，允许某个网页脚本访问另一个网页的数据，但前提是这两个网页必须有相同的URI、主机名和端口号，一旦两个网站满足上述条件，这两个网站就被认定为具有相同来源。
```

### 为什么需要同源策略

```
    xss : 跨站脚本攻击
    CSRF: 跨站请求伪造

```
### 同源的界定

```
    同源的判断依据是协议、域名、端口号是否一致

```

### 怎么跨域

```
    修改浏览器配置
        跨域是浏览器的一种机制！！！ (关闭规则皆可解决跨域)

        Mac
            新建一个空白的文件夹
            用命令行注入参数打开Chrome浏览器：open -n /Applications/Google\ Chrome.app/ --args --disable-web-security --user-data-dir=...
        Windows
            新建一个空白的文件夹。
            右键Chrome，在属性目标路径中后添加--disable-web-security \--user-data-dir=...

        备注：--user-data-dir: 你新创建文件夹的目录
    特定请求方式
        JSONP
            前端：
                function handleResponse(res){
                    console.log(res,data);
                }
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = 'http://localhost:4200/?cb=handleResponse';
                body.append('script);

            后端：

                serve.on('request',(res,req)=>{
                    <!-- 结局全局回调 -->
                    const params = qs.parse(req.url.split('?')[1]);
                    const data = 'Hello World';
                    res.writeHead(200,{'Content-Type':'text/javascript'});
                    res.write(`${param.cb} && ${param.cb} && ${JSON.stringify(params.data)}`)

                })
    跨域资源共享（CORS）
        Access-Control-Allow-Origin:*
        当需要带cookie请求时， 前端需要XMLHttpRequest开启withCredentials，后端需要把响应报头Access-Control-Allow-Credentials设置为true
    代理
        Nginx
```
